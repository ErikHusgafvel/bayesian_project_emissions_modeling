---
title: \vspace{3in}BDA - Assignment 9
author: "Anonymous"
output: 
  pdf_document: 
    toc: true
    toc_depth: 1
    includes:
      before_body: latex/before_body.tex
    extra_dependencies: ["amsmath"]
---

\newpage

```{r message=FALSE}
library(rstan)
library(aaltobda)
data("factory")
SEED <- 12345
writeLines(readLines("assignment9_hierarchical_model.stan"))


```{r message=FALSE}
num_of_chains = 10
hier_model <- rstan::stan_model(file = "assignment9_hierarchical_model.stan")
hier_data <- list(N = nrow(factory),
                  J = ncol(factory),
                  y = factory)
hier_fit <- rstan::sampling(object = hier_model,
                            data = hier_data,
                            iter = 5000,
                            warmup = 1000,
                            chains = num_of_chains,
                            verbose = FALSE,
                            refresh = 0,
                            show_messages = FALSE,
                            seed = SEED)
```

